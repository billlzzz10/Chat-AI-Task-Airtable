<!DOCTYPE html>
<html lang="th" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ashval Business OS - Complete AI Dashboard</title>

    <script src="<https://cdn.tailwindcss.com>"></script>
    <script src="<https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js>" defer></script>
    <script src="<https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js>"></script>
    <script src="<https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js>"></script>
    <link href="<https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css>" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#8B5FBF',
                        accent: '#FF6B9D',
                        success: '#4ADE80',
                        warning: '#FBBF24',
                        error: '#EF4444',
                        'base-100': '#ffffff',
                        'base-200': '#f9fafb',
                        'base-300': '#f3f4f6',
                        'dark-base-100': '#1f2937',
                        'dark-base-200': '#374151',
                        'dark-base-300': '#4b5563',
                    }
                }
            }
        }
    </script>

    <style>
        @import url('<https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap>');
        * { font-family: 'Noto Sans Thai', sans-serif; scroll-behavior: smooth; }

        .glass {
             background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(12px);
             border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .dark .glass {
            background: rgba(29, 28, 45, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-3d {
             transform: translateY(0px);
             box-shadow: 0 4px 8px rgba(0,0,0,0.1);
             transition: all 0.15s ease-in-out;
         }
        .btn-3d:hover {
             transform: translateY(-2px);
             box-shadow: 0 6px 16px rgba(93, 92, 222, 0.3);
         }
        .btn-3d:active {
            transform: translateY(1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .chart-container { position: relative; height: 280px; width: 100%; }
        [x-cloak] { display: none !important; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #8B5FBF; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #5D5CDE; }

        /* SortableJS placeholder */
        .kanban-placeholder {
            background-color: rgba(93, 92, 222, 0.2);
            border: 2px dashed #5D5CDE;
            border-radius: 12px;
            min-height: 100px;
        }
    </style>
</head>

<body class="bg-base-200 dark:bg-dark-base-100 text-gray-800 dark:text-gray-200" x-cloak>
    <div x-data="businessOS()" x-init="init()" :class="{ 'dark': isDark }">
        <div class="flex h-screen">
            <aside :class="sidebarOpen ? 'translate-x-0' : '-translate-x-full'"
                    class="fixed lg:static lg:translate-x-0 z-50 w-64 h-full glass flex-shrink-0 transition-transform duration-300 ease-in-out">
                <div class="flex flex-col h-full">
                    <div class="p-4 flex items-center space-x-3 border-b border-white/10">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary to-secondary rounded-xl flex items-center justify-center shadow-lg">
                            <i class="fas fa-brain text-white"></i>
                        </div>
                        <div>
                            <h1 class="text-lg font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Ashval OS</h1>
                            <p class="text-xs text-gray-500 dark:text-gray-400">AI Business Control</p>
                        </div>
                    </div>

                    <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
                        <template x-for="item in navItems" :key="item.id">
                            <button @click="currentView = item.id; sidebarOpen = false"
                                    :class="currentView === item.id ? 'bg-primary text-white shadow-md' : 'hover:bg-primary/10'"
                                    class="w-full text-left px-3 py-2.5 rounded-lg transition-all duration-200 flex items-center">
                                <i :class="item.icon" class="w-6 text-center mr-3"></i>
                                <span x-text="item.label"></span>
                                <span x-show="item.count" x-text="item.count()"
                                       class="ml-auto bg-primary/20 text-primary px-2 py-0.5 rounded-full text-xs font-semibold"></span>
                            </button>
                        </template>
                    </nav>

                     <div class="p-4 border-t border-white/10">
                        <button @click="currentView = 'settings'; sidebarOpen = false" class="w-full text-left px-3 py-2 rounded-lg hover:bg-primary/10 transition-colors flex items-center">
                            <i class="fas fa-cog w-6 text-center mr-3"></i>
                            <span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
                        </button>
                    </div>
                </div>
            </aside>

            <div class="flex-1 flex flex-col h-screen overflow-y-auto">
                <header class="sticky top-0 z-40 glass p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button @click="sidebarOpen = !sidebarOpen" class="lg:hidden p-2 rounded-lg hover:bg-primary/10">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h2 class="text-xl font-bold" x-text="getCurrentViewTitle()"></h2>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button @click="showQuickAddModal = true" class="btn-3d bg-success text-white px-3 py-2 rounded-lg flex items-center">
                            <i class="fas fa-plus mr-1"></i>
                            <span class="hidden sm:inline">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πà‡∏ß‡∏ô</span>
                        </button>
                        <button @click="toggleDarkMode()" class="btn-3d bg-gray-700 dark:bg-dark-base-300 text-white p-2.5 rounded-lg">
                            <i :class="isDark ? 'fas fa-sun text-yellow-400' : 'fas fa-moon'"></i>
                        </button>
                    </div>
                </header>

                <main class="flex-1 p-6 space-y-6">
                    <!-- Dashboard -->
                    <div x-show="currentView === 'dashboard'">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-6">
                            <div class="glass rounded-xl p-5 text-center">
                                <i class="fas fa-tasks text-primary text-3xl mb-2"></i>
                                <p class="text-2xl font-bold" x-text="tasks.length"></p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            </div>
                            <div class="glass rounded-xl p-5 text-center">
                                <i class="fas fa-check-circle text-success text-3xl mb-2"></i>
                                <p class="text-2xl font-bold" x-text="tasks.filter(t => t.status === 'done').length"></p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</p>
                            </div>
                            <div class="glass rounded-xl p-5 text-center">
                                <i class="fas fa-project-diagram text-secondary text-3xl mb-2"></i>
                                <p class="text-2xl font-bold" x-text="projects.length"></p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                            </div>
                            <div class="glass rounded-xl p-5 text-center">
                                <i class="far fa-lightbulb text-accent text-3xl mb-2"></i>
                                <p class="text-2xl font-bold" x-text="ideas.length"></p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢</p>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold mb-4">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</h3>
                                <div class="chart-container"><canvas id="projectChart"></canvas></div>
                            </div>
                            <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold mb-4">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô</h3>
                                <div class="chart-container"><canvas id="taskTypeChart"></canvas></div>
                            </div>
                        </div>
                    </div>

                    <!-- Kanban Board -->
                    <div x-show="currentView === 'kanban'">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-full" x-init="initKanban()">
                             <template x-for="status in kanbanStatuses" :key="status.id">
                                <div class="glass rounded-xl p-4 flex flex-col">
                                    <h3 class="font-semibold mb-4 flex items-center">
                                        <span class="w-3 h-3 rounded-full mr-3" :class="status.color"></span>
                                        <span x-text="status.title"></span>
                                        <span class="ml-auto text-sm bg-primary/10 text-primary px-2 rounded-full" x-text="tasks.filter(t => t.status === status.id).length"></span>
                                    </h3>
                                    <div :id="`kanban-${status.id}`" class="space-y-3 min-h-[200px] flex-1 overflow-y-auto pr-2">
                                        <template x-for="task in tasks.filter(t => t.status === status.id)" :key="task.id">
                                            <div :data-id="task.id" class="bg-base-100 dark:bg-dark-base-200 p-4 rounded-lg shadow-sm cursor-grab active:cursor-grabbing">
                                                <h4 class="font-medium" x-text="task.title"></h4>
                                                <p class="text-sm text-gray-500 dark:text-gray-400 mt-1" x-text="task.description"></p>
                                                <div class="flex justify-between items-center mt-3">
                                                    <span class="px-2 py-1 rounded-full text-xs" :class="getPriorityClass(task.priority)" x-text="task.priority"></span>
                                                    <div class="flex items-center -space-x-2">
                                                        <img src="<https://i.pravatar.cc/24?u=1>" class="w-6 h-6 rounded-full border-2 border-white dark:border-dark-base-200">
                                                    </div>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- AI Chat -->
                    <div x-show="currentView === 'ai_chat'" class="h-[calc(100vh-10rem)] flex flex-col">
                        <div class="flex-1 glass rounded-xl p-4 overflow-y-auto space-y-4">
                            <template x-for="message in chatMessages" :key="message.id">
                                <div class="flex" :class="message.sender === 'user' ? 'justify-end' : 'justify-start'">
                                    <div class="max-w-md p-3 rounded-lg" :class="message.sender === 'user' ? 'bg-primary text-white' : 'bg-base-100 dark:bg-dark-base-200'">
                                        <p x-text="message.text"></p>
                                        <p class="text-xs mt-1 opacity-70" x-text="new Date(message.timestamp).toLocaleTimeString()"></p>
                                    </div>
                                </div>
                            </template>
                             <div x-show="aiLoading" class="flex justify-start">
                                <div class="max-w-md p-3 rounded-lg bg-base-100 dark:bg-dark-base-200 flex items-center space-x-2">
                                    <div class="w-2 h-2 bg-primary rounded-full animate-bounce" style="animation-delay: 0s;"></div>
                                    <div class="w-2 h-2 bg-primary rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
                                    <div class="w-2 h-2 bg-primary rounded-full animate-bounce" style="animation-delay: 0.2s;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <form @submit.prevent="sendChatMessage()" class="relative">
                                <input type="text" x-model="chatInput" placeholder="‡∏ñ‡∏≤‡∏° AI ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."
                                        class="w-full pl-4 pr-12 py-3 rounded-lg bg-base-100 dark:bg-dark-base-200 border-2 border-transparent focus:border-primary focus:ring-0 transition">
                                <button type="submit" class="absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-full bg-primary text-white hover:bg-opacity-80">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- Forms -->
                    <div x-show="currentView === 'forms'" class="space-y-6">
                        <h2 class="text-2xl font-bold">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡∏ü‡∏≠‡∏£‡πå‡∏° (All-in-one)</h2>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                             <!-- Daily Missions Form -->
                             <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold text-lg mb-4 flex items-center"><i class="fas fa-bullseye mr-3 text-primary"></i>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (AI ‡πÅ‡∏ï‡∏Å‡∏á‡∏≤‡∏ô‡∏¢‡πà‡∏≠‡∏¢)</h3>
                                <form @submit.prevent="handleFormSubmit('dailyMission')" class="space-y-3">
                                    <input type="text" x-model="forms.dailyMission.title" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                    <textarea x-model="forms.dailyMission.description" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2" rows="2"></textarea>
                                    <div class="grid grid-cols-2 gap-3">
                                        <select x-model="forms.dailyMission.priority" class="bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                            <option value="">-- ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç --</option>
                                            <option value="High">‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å</option>
                                            <option value="Medium">‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</option>
                                            <option value="Low">‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ô‡πâ‡∏≠‡∏¢</option>
                                        </select>
                                        <input type="date" x-model="forms.dailyMission.dueDate" class="bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                    </div>
                                    <button type="submit" class="btn-3d bg-primary text-white w-full py-2 rounded-lg">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏ï‡∏Å‡∏á‡∏≤‡∏ô</button>
                                </form>
                            </div>

                             <!-- Idea Inbox Form -->
                             <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold text-lg mb-4 flex items-center"><i class="far fa-lightbulb mr-3 text-accent"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÉ‡∏´‡∏°‡πà</h3>
                                <form @submit.prevent="handleFormSubmit('idea')" class="space-y-3">
                                    <input type="text" x-model="forms.idea.title" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                    <textarea x-model="forms.idea.description" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢" class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2" rows="2"></textarea>
                                    <div class="grid grid-cols-2 gap-3">
                                        <select x-model="forms.idea.type" class="bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                            <option value="">-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó --</option>
                                            <option value="Podcast">Podcast</option>
                                            <option value="Video">Video</option>
                                            <option value="Novel">Novel</option>
                                            <option value="Music">Music</option>
                                            <option value="Content">‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå</option>
                                        </select>
                                        <select x-model="forms.idea.mood" class="bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                            <option value="">-- ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå --</option>
                                            <option value="Energetic">‡∏Å‡∏£‡∏∞‡∏õ‡∏£‡∏µ‡πâ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏£‡πà‡∏≤</option>
                                            <option value="Calm">‡∏™‡∏á‡∏ö</option>
                                            <option value="Neutral">‡∏Å‡∏•‡∏≤‡∏á‡πÜ</option>
                                            <option value="Tired">‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn-3d bg-accent text-white w-full py-2 rounded-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢</button>
                                </form>
                            </div>

                            <!-- TTS Form -->
                            <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold text-lg mb-4 flex items-center"><i class="fas fa-microphone-alt mr-3 text-secondary"></i>Script to Voice (TTS)</h3>
                                <form @submit.prevent="handleFormSubmit('tts')" class="space-y-3">
                                    <textarea x-model="forms.tts.script" placeholder="‡πÉ‡∏™‡πà‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." rows="3" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2"></textarea>
                                    <select x-model="forms.tts.voice" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á --</option>
                                        <option value="A">‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á (Google AI Studio)</option>
                                        <option value="Leda">‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á (Leda)</option>
                                    </select>
                                    <button type="submit" class="btn-3d bg-secondary text-white w-full py-2 rounded-lg">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á</button>
                                </form>
                            </div>

                             <!-- YouTube Analysis Form -->
                             <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold text-lg mb-4 flex items-center"><i class="fab fa-youtube mr-3 text-red-500"></i>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ä‡πà‡∏≠‡∏á YouTube</h3>
                                <form @submit.prevent="handleFormSubmit('youtube')" class="space-y-3">
                                    <input type="url" x-model="forms.youtube.url" placeholder="URL ‡∏ä‡πà‡∏≠‡∏á YouTube" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                    <button type="submit" class="btn-3d bg-red-500 text-white w-full py-2 rounded-lg">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
                                </form>
                            </div>

                            <!-- AI Prompt Form -->
                            <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold text-lg mb-4 flex items-center"><i class="fas fa-magic mr-3 text-purple-500"></i>‡∏™‡∏£‡πâ‡∏≤‡∏á AI Prompt</h3>
                                <form @submit.prevent="handleFormSubmit('prompt')" class="space-y-3">
                                    <input type="text" x-model="forms.prompt.name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏£‡∏≠‡∏°‡∏ï‡πå" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                    <textarea x-model="forms.prompt.content" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏£‡∏≠‡∏°‡∏ï‡πå" rows="3" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2"></textarea>
                                    <select x-model="forms.prompt.type" class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                        <option value="">-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏£‡∏≠‡∏°‡∏ï‡πå --</option>
                                        <option value="‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô">‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</option>
                                        <option value="‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå">‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</option>
                                        <option value="‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤">‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤</option>
                                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                    </select>
                                    <button type="submit" class="btn-3d bg-purple-500 text-white w-full py-2 rounded-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡∏£‡∏≠‡∏°‡∏ï‡πå</button>
                                </form>
                            </div>

                            <!-- Analysis & Report Form -->
                            <div class="glass rounded-xl p-6">
                                <h3 class="font-semibold text-lg mb-4 flex items-center"><i class="fas fa-chart-line mr-3 text-blue-500"></i>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h3>
                                <form @submit.prevent="handleFormSubmit('report')" class="space-y-3">
                                    <input type="text" x-model="forms.report.title" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                    <textarea x-model="forms.report.content" placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå" rows="3" required class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2"></textarea>
                                    <select x-model="forms.report.type" class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                        <option value="">-- ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô --</option>
                                        <option value="‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</option>
                                        <option value="‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</option>
                                        <option value="‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</option>
                                        <option value="‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô">‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</option>
                                    </select>
                                    <button type="submit" class="btn-3d bg-blue-500 text-white w-full py-2 rounded-lg">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Mood Tracker -->
                    <div x-show="currentView === 'mood'" class="space-y-6">
                        <h2 class="text-2xl font-bold">Mood Tracker</h2>
                        <div class="glass rounded-xl p-6">
                            <h3 class="font-semibold mb-4">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h3>
                            <div class="flex flex-wrap justify-center gap-6 py-4">
                                <button @click="setMood('Energetic')" class="btn-3d p-4 rounded-xl flex flex-col items-center transition-all" :class="currentMood === 'Energetic' ? 'bg-primary text-white scale-110' : 'bg-base-100 dark:bg-dark-base-200'">
                                    <span class="text-4xl">üòÄ</span>
                                    <span class="mt-2">‡∏Å‡∏£‡∏∞‡∏õ‡∏£‡∏µ‡πâ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏£‡πà‡∏≤</span>
                                </button>
                                <button @click="setMood('Calm')" class="btn-3d p-4 rounded-xl flex flex-col items-center transition-all" :class="currentMood === 'Calm' ? 'bg-primary text-white scale-110' : 'bg-base-100 dark:bg-dark-base-200'">
                                    <span class="text-4xl">üòå</span>
                                    <span class="mt-2">‡∏™‡∏á‡∏ö</span>
                                </button>
                                <button @click="setMood('Neutral')" class="btn-3d p-4 rounded-xl flex flex-col items-center transition-all" :class="currentMood === 'Neutral' ? 'bg-primary text-white scale-110' : 'bg-base-100 dark:bg-dark-base-200'">
                                    <span class="text-4xl">üòê</span>
                                    <span class="mt-2">‡∏Å‡∏•‡∏≤‡∏á‡πÜ</span>
                                </button>
                                <button @click="setMood('Tired')" class="btn-3d p-4 rounded-xl flex flex-col items-center transition-all" :class="currentMood === 'Tired' ? 'bg-primary text-white scale-110' : 'bg-base-100 dark:bg-dark-base-200'">
                                    <span class="text-4xl">üò©</span>
                                    <span class="mt-2">‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢</span>
                                </button>
                            </div>
                        </div>

                        <div class="glass rounded-xl p-6">
                            <h3 class="font-semibold mb-4">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h3>
                            <div class="bg-base-100 dark:bg-dark-base-200 p-4 rounded-lg" x-show="currentMood">
                                <p class="text-gray-600 dark:text-gray-300" x-text="getMoodRecommendation()"></p>
                                <div class="mt-4 space-y-2">
                                    <template x-for="task in getMoodTasks()" :key="task.id">
                                        <div class="p-3 rounded-lg border border-primary/20 flex justify-between items-center">
                                            <span x-text="task.title"></span>
                                            <button @click="startTask(task.id)" class="px-3 py-1 rounded-lg bg-primary/10 text-primary hover:bg-primary/20">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥</button>
                                        </div>
                                    </template>
                                </div>
                            </div>
                            <div x-show="!currentMood" class="text-center p-6">
                                <p class="text-gray-500">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                            </div>
                        </div>

                        <div class="glass rounded-xl p-6">
                            <h3 class="font-semibold mb-4">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå (7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</h3>
                            <div class="chart-container"><canvas id="moodChart"></canvas></div>
                        </div>
                    </div>

                    <!-- Settings -->
                    <div x-show="currentView === 'settings'" class="space-y-6">
                        <h2 class="text-2xl font-bold">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞ API</h2>
                        <div class="glass rounded-xl p-6">
                            <h3 class="font-semibold mb-4">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Keys</h3>
                            <form @submit.prevent="saveAPISettings()" class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Airtable API Key</label>
                                    <input type="password" x-model="settings.airtableKey" placeholder="pat..." class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Airtable Base ID</label>
                                    <input type="text" x-model="settings.airtableBase" placeholder="app..." class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Gemini API Key</label>
                                    <input type="password" x-model="settings.geminiKey" placeholder="AI..." class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Google Text-to-Speech API Key</label>
                                    <input type="password" x-model="settings.ttsKey" placeholder="TTS..." class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">YouTube API Key</label>
                                    <input type="password" x-model="settings.youtubeKey" placeholder="YT..." class="w-full bg-base-100/50 dark:bg-dark-base-200/50 rounded-lg p-2">
                                </div>
                                <button type="submit" class="btn-3d bg-primary text-white px-4 py-2 rounded-lg">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                            </form>
                        </div>

                        <div class="glass rounded-xl p-6">
                            <h3 class="font-semibold mb-4">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h3>
                            <div class="space-y-3">
                                <div class="flex items-center">
                                    <input type="checkbox" id="notifyTasks" x-model="settings.notifications.tasks" class="mr-3">
                                    <label for="notifyTasks">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="notifyComments" x-model="settings.notifications.comments" class="mr-3">
                                    <label for="notifyComments">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="notifyAI" x-model="settings.notifications.ai" class="mr-3">
                                    <label for="notifyAI">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ AI ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à</label>
                                </div>
                            </div>
                        </div>

                        <div class="glass rounded-xl p-6">
                            <h3 class="font-semibold mb-4">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</h3>
                            <div class="space-y-3">
                                <div class="flex items-center">
                                    <input type="checkbox" id="autoAI" x-model="settings.automation.ai" class="mr-3">
                                    <label for="autoAI">‡πÉ‡∏ä‡πâ AI ‡πÅ‡∏ï‡∏Å‡∏á‡∏≤‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="autoSync" x-model="settings.automation.sync" class="mr-3">
                                    <label for="autoSync">Sync ‡∏Å‡∏±‡∏ö Airtable ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="autoExport" x-model="settings.automation.export" class="mr-3">
                                    <label for="autoExport">Export Markdown ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Quick Add Modal -->
        <div x-show="showQuickAddModal" class="fixed inset-0 z-50 overflow-y-auto" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
            <div class="flex items-center justify-center min-h-screen px-4">
                <div class="fixed inset-0 bg-black/30 backdrop-blur-sm" @click="showQuickAddModal = false"></div>
                <div class="glass relative max-w-md w-full rounded-xl p-6 shadow-lg" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95">
                    <h3 class="text-xl font-bold mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πà‡∏ß‡∏ô</h3>
                    <div class="space-y-4">
                        <button @click="quickAdd('task'); showQuickAddModal = false" class="w-full p-3 text-left rounded-lg hover:bg-primary/10 transition flex items-center">
                            <i class="fas fa-tasks w-8 h-8 bg-primary/20 text-primary flex items-center justify-center rounded-lg mr-3"></i>
                            <div>
                                <p class="font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î Kanban</p>
                            </div>
                        </button>
                        <button @click="quickAdd('idea'); showQuickAddModal = false" class="w-full p-3 text-left rounded-lg hover:bg-primary/10 transition flex items-center">
                            <i class="far fa-lightbulb w-8 h-8 bg-accent/20 text-accent flex items-center justify-center rounded-lg mr-3"></i>
                            <div>
                                <p class="font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÉ‡∏´‡∏°‡πà</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏Ñ‡∏¥‡∏î‡πÑ‡∏î‡πâ</p>
                            </div>
                        </button>
                        <button @click="quickAdd('project'); showQuickAddModal = false" class="w-full p-3 text-left rounded-lg hover:bg-primary/10 transition flex items-center">
                            <i class="fas fa-project-diagram w-8 h-8 bg-secondary/20 text-secondary flex items-center justify-center rounded-lg mr-3"></i>
                            <div>
                                <p class="font-medium">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà</p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</p>
                            </div>
                        </button>
                    </div>
                    <button @click="showQuickAddModal = false" class="absolute top-3 right-3 p-1 rounded-full hover:bg-primary/10">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Notification Toast -->
        <div x-show="notification.show" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 translate-y-4" class="fixed bottom-4 right-4 max-w-xs w-full p-4 rounded-lg shadow-lg" :class="notification.type === 'success' ? 'bg-success text-white' : notification.type === 'error' ? 'bg-error text-white' : 'bg-warning text-gray-800'">
            <div class="flex items-center">
                <i :class="notification.type === 'success' ? 'fas fa-check-circle' : notification.type === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-exclamation-triangle'" class="mr-3 text-xl"></i>
                <p x-text="notification.message"></p>
                <button @click="notification.show = false" class="ml-auto p-1 rounded-full hover:bg-black/10">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        function businessOS() {
            return {
                isDark: localStorage.getItem('darkMode') === 'true',
                sidebarOpen: false,
                currentView: 'dashboard',
                showQuickAddModal: false,
                notification: {
                    show: false,
                    type: 'success',
                    message: '',
                    timeout: null
                },
                aiLoading: false,

                // Data
                tasks: [
                    { id: 1, title: '‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Dashboard', description: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ', status: 'todo', priority: 'High' },
                    { id: 2, title: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° AI Trends', description: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå AI ‡πÉ‡∏ô‡∏õ‡∏µ 2025', status: 'doing', priority: 'Medium' },
                    { id: 3, title: '‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÉ‡∏´‡∏°‡πà', description: '‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå', status: 'doing', priority: 'Medium' },
                    { id: 4, title: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', description: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà', status: 'done', priority: 'High' },
                    { id: 5, title: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô', description: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô Line Notify', status: 'done', priority: 'Low' }
                ],
                projects: [
                    { id: 1, name: 'Business OS', progress: 75, type: 'Development' },
                    { id: 2, name: 'Content Creation', progress: 40, type: 'Content' },
                    { id: 3, name: 'Novel Writing', progress: 60, type: 'Creative' },
                    { id: 4, name: 'Podcast Series', progress: 25, type: 'Content' },
                    { id: 5, name: 'AI Research', progress: 90, type: 'Research' }
                ],
                ideas: [
                    { id: 1, title: '‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô', type: 'Novel', mood: 'Energetic' },
                    { id: 2, title: '‡∏û‡∏≠‡∏î‡πÅ‡∏Ñ‡∏™‡∏ï‡πå‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', type: 'Podcast', mood: 'Calm' },
                    { id: 3, title: '‡∏Ñ‡∏≠‡∏£‡πå‡∏™‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå - Python ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô', type: 'Content', mood: 'Energetic' },
                    { id: 4, title: '‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô', type: 'Video', mood: 'Neutral' },
                    { id: 5, title: '‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢ Fantasy', type: 'Music', mood: 'Calm' }
                ],

                chatMessages: [
                    { id: 1, sender: 'ai', text: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏Ñ‡∏∑‡∏≠ AI ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?', timestamp: new Date().getTime() - 24 * 60 * 60 * 1000 }
                ],
                chatInput: '',

                currentMood: localStorage.getItem('currentMood') || '',
                moodHistory: JSON.parse(localStorage.getItem('moodHistory')) || [
                    { date: '2025-07-01', mood: 'Energetic' },
                    { date: '2025-07-02', mood: 'Calm' },
                    { date: '2025-07-03', mood: 'Neutral' },
                    { date: '2025-07-04', mood: 'Tired' },
                    { date: '2025-07-05', mood: 'Energetic' },
                    { date: '2025-07-06', mood: 'Calm' }
                ],

                kanbanStatuses: [
                    { id: 'todo', title: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', color: 'bg-warning' },
                    { id: 'doing', title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥', color: 'bg-primary' },
                    { id: 'done', title: '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô', color: 'bg-success' }
                ],

                navItems: [
                    { id: 'dashboard', label: '‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î', icon: 'fas fa-home' },
                    { id: 'kanban', label: 'Kanban Board', icon: 'fas fa-tasks' },
                    { id: 'ai_chat', label: 'AI Chat', icon: 'fas fa-robot' },
                    { id: 'forms', label: '‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ', icon: 'fas fa-clipboard-list' },
                    { id: 'mood', label: 'Mood Tracker', icon: 'fas fa-smile' },
                    { id: 'projects', label: '‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå', icon: 'fas fa-project-diagram', count: function() { return this.projects.length; } }
                ],

                settings: {
                    airtableKey: localStorage.getItem('airtableKey') || '',
                    airtableBase: localStorage.getItem('airtableBase') || '',
                    geminiKey: localStorage.getItem('geminiKey') || '',
                    ttsKey: localStorage.getItem('ttsKey') || '',
                    youtubeKey: localStorage.getItem('youtubeKey') || '',
                    notifications: {
                        tasks: true,
                        comments: true,
                        ai: true
                    },
                    automation: {
                        ai: true,
                        sync: true,
                        export: false
                    }
                },

                forms: {
                    dailyMission: { title: '', description: '', priority: '', dueDate: '' },
                    idea: { title: '', description: '', type: '', mood: '' },
                    tts: { script: '', voice: '' },
                    youtube: { url: '' },
                    prompt: { name: '', content: '', type: '' },
                    report: { title: '', content: '', type: '' }
                },

                init() {
                    this.initCharts();

                    // Set dark mode based on system preference if not set
                    if (localStorage.getItem('darkMode') === null) {
                        this.isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                        localStorage.setItem('darkMode', this.isDark.toString());
                    }

                    document.documentElement.classList.toggle('dark', this.isDark);
                },

                initCharts() {
                    setTimeout(() => {
                        // Project Progress Chart
                        const projectCtx = document.getElementById('projectChart').getContext('2d');
                        const projectNames = this.projects.map(p => p.name);
                        const projectProgress = this.projects.map(p => p.progress);

                        new Chart(projectCtx, {
                            type: 'bar',
                            data: {
                                labels: projectNames,
                                datasets: [{
                                    label: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤ (%)',
                                    data: projectProgress,
                                    backgroundColor: [
                                        '#5D5CDE', '#8B5FBF', '#FF6B9D', '#4ADE80', '#FBBF24'
                                    ],
                                    borderWidth: 0,
                                    borderRadius: 6
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        beginAtZero: true,
                                        max: 100
                                    }
                                }
                            }
                        });

                        // Task Type Chart
                        const taskTypeCtx = document.getElementById('taskTypeChart').getContext('2d');
                        const taskTypes = ['Development', 'Content', 'Creative', 'Research', 'Other'];
                        const taskCounts = [2, 3, 2, 1, 0];

                        new Chart(taskTypeCtx, {
                            type: 'doughnut',
                            data: {
                                labels: taskTypes,
                                datasets: [{
                                    data: taskCounts,
                                    backgroundColor: [
                                        '#5D5CDE', '#8B5FBF', '#FF6B9D', '#4ADE80', '#FBBF24'
                                    ],
                                    borderWidth: 2,
                                    borderColor: this.isDark ? '#1f2937' : '#ffffff'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'right'
                                    }
                                }
                            }
                        });

                        // Mood Chart
                        const moodCtx = document.getElementById('moodChart').getContext('2d');
                        const moodLabels = this.moodHistory.map(m => m.date.split('-')[2] + '/' + m.date.split('-')[1]); // Format as DD/MM
                        const moodData = this.moodHistory.map(m => {
                            switch(m.mood) {
                                case 'Energetic': return 4;
                                case 'Calm': return 3;
                                case 'Neutral': return 2;
                                case 'Tired': return 1;
                                default: return 0;
                            }
                        });

                        new Chart(moodCtx, {
                            type: 'line',
                            data: {
                                labels: moodLabels,
                                datasets: [{
                                    label: '‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå',
                                    data: moodData,
                                    backgroundColor: '#5D5CDE',
                                    borderColor: '#5D5CDE',
                                    tension: 0.3,
                                    pointRadius: 6,
                                    pointBackgroundColor: '#5D5CDE',
                                    pointBorderColor: this.isDark ? '#1f2937' : '#ffffff',
                                    pointBorderWidth: 2
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                scales: {
                                    y: {
                                        min: 0,
                                        max: 5,
                                        ticks: {
                                            stepSize: 1,
                                            callback: function(value) {
                                                switch(value) {
                                                    case 4: return '‡∏Å‡∏£‡∏∞‡∏õ‡∏£‡∏µ‡πâ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏£‡πà‡∏≤';
                                                    case 3: return '‡∏™‡∏á‡∏ö';
                                                    case 2: return '‡∏Å‡∏•‡∏≤‡∏á‡πÜ';
                                                    case 1: return '‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢';
                                                    default: return '';
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    }, 100);
                },

                initKanban() {
                    setTimeout(() => {
                        this.kanbanStatuses.forEach(status => {
                            const el = document.getElementById(`kanban-${status.id}`);
                            if (el) {
                                new Sortable(el, {
                                    group: 'kanban',
                                    animation: 150,
                                    ghostClass: 'kanban-placeholder',
                                    onEnd: (evt) => {
                                        const taskId = parseInt(evt.item.dataset.id);
                                        const newStatus = evt.to.id.replace('kanban-', '');
                                        this.updateTaskStatus(taskId, newStatus);
                                    }
                                });
                            }
                        });
                    }, 100);
                },

                updateTaskStatus(taskId, newStatus) {
                    const taskIndex = this.tasks.findIndex(t => t.id === taskId);
                    if (taskIndex !== -1) {
                        this.tasks[taskIndex].status = newStatus;
                        this.showNotification('success', '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                    }
                },

                getCurrentViewTitle() {
                    const view = this.navItems.find(item => item.id === this.currentView);
                    if (view) return view.label;
                    if (this.currentView === 'settings') return '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤';
                    return '';
                },

                toggleDarkMode() {
                    this.isDark = !this.isDark;
                    localStorage.setItem('darkMode', this.isDark.toString());
                    document.documentElement.classList.toggle('dark', this.isDark);

                    // Reinit charts when theme changes
                    this.initCharts();
                },

                showNotification(type, message) {
                    if (this.notification.timeout) {
                        clearTimeout(this.notification.timeout);
                    }

                    this.notification.type = type;
                    this.notification.message = message;
                    this.notification.show = true;

                    this.notification.timeout = setTimeout(() => {
                        this.notification.show = false;
                    }, 3000);
                },

                sendChatMessage() {
                    if (!this.chatInput.trim()) return;

                    const userMessage = {
                        id: Date.now(),
                        sender: 'user',
                        text: this.chatInput,
                        timestamp: Date.now()
                    };

                    this.chatMessages.push(userMessage);
                    this.aiLoading = true;

                    // Simulate AI response
                    setTimeout(() => {
                        const aiResponses = [
                            "‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ",
                            "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏à‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏ô‡πÑ‡∏°‡πà‡∏ä‡πâ‡∏≤",
                            "‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß",
                            "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà",
                            "‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ç‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö"
                        ];

                        const aiMessage = {
                            id: Date.now(),
                            sender: 'ai',
                            text: aiResponses[Math.floor(Math.random() * aiResponses.length)],
                            timestamp: Date.now()
                        };

                        this.aiLoading = false;
                        this.chatMessages.push(aiMessage);
                    }, 1500);

                    this.chatInput = '';
                },

                handleFormSubmit(formType) {
                    const formData = this.forms[formType];

                    this.aiLoading = true;
                    setTimeout(() => {
                        this.aiLoading = false;

                        switch (formType) {
                            case 'dailyMission':
                                // Add main task
                                this.tasks.push({
                                    id: Date.now(),
                                    title: formData.title,
                                    description: formData.description || '‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å',
                                    status: 'todo',
                                    priority: formData.priority || 'Medium'
                                });

                                // AI generate subtasks (simulated)
                                for (let i = 1; i <= 3; i++) {
                                    this.tasks.push({
                                        id: Date.now() + i,
                                        title: `‡∏á‡∏≤‡∏ô‡∏¢‡πà‡∏≠‡∏¢ ${i} ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${formData.title}`,
                                        description: `‡∏á‡∏≤‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "${formData.title}"`,
                                        status: 'todo',
                                        priority: formData.priority || 'Medium'
                                    });
                                }

                                this.showNotification('success', '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡πÅ‡∏ï‡∏Å‡∏á‡∏≤‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                                break;

                            case 'idea':
                                this.ideas.push({
                                    id: Date.now(),
                                    title: formData.title,
                                    type: formData.type || 'Other',
                                    mood: formData.mood || this.currentMood || 'Neutral'
                                });
                                this.showNotification('success', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                                break;

                            case 'tts':
                                this.showNotification('success', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á... ‡∏´‡∏≤‡∏Å‡∏°‡∏µ API Key ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ');
                                break;

                            case 'youtube':
                                this.showNotification('success', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ä‡πà‡∏≠‡∏á YouTube... ‡∏´‡∏≤‡∏Å‡∏°‡∏µ API Key ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ');
                                break;

                            case 'prompt':
                                this.showNotification('success', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏û‡∏£‡∏≠‡∏°‡∏ï‡πå AI ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                                break;

                            case 'report':
                                this.showNotification('success', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏ß‡∏¢ AI...');
                                break;
                        }

                        // Reset form
                        this.forms[formType] = Object.fromEntries(
                            Object.keys(this.forms[formType]).map(key => [key, ''])
                        );

                    }, 1500);
                },

                quickAdd(type) {
                    switch (type) {
                        case 'task':
                            this.currentView = 'forms';
                            setTimeout(() => {
                                document.querySelector('input[placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å"]').focus();
                            }, 100);
                            break;

                        case 'idea':
                            this.currentView = 'forms';
                            setTimeout(() => {
                                document.querySelector('input[placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢"]').focus();
                            }, 100);
                            break;

                        case 'project':
                            this.showNotification('info', '‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå');
                            break;
                    }
                },

                saveAPISettings() {
                    localStorage.setItem('airtableKey', this.settings.airtableKey);
                    localStorage.setItem('airtableBase', this.settings.airtableBase);
                    localStorage.setItem('geminiKey', this.settings.geminiKey);
                    localStorage.setItem('ttsKey', this.settings.ttsKey);
                    localStorage.setItem('youtubeKey', this.settings.youtubeKey);

                    this.showNotification('success', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                },

                setMood(mood) {
                    this.currentMood = mood;
                    localStorage.setItem('currentMood', mood);

                    // Add to history
                    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD

                    // Check if already have entry for today
                    const todayIndex = this.moodHistory.findIndex(m => m.date === today);
                    if (todayIndex !== -1) {
                        this.moodHistory[todayIndex].mood = mood;
                    } else {
                        this.moodHistory.push({ date: today, mood });
                        // Keep only last 7 days
                        if (this.moodHistory.length > 7) {
                            this.moodHistory.shift();
                        }
                    }

                    localStorage.setItem('moodHistory', JSON.stringify(this.moodHistory));
                    this.showNotification('success', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');

                    // Reinit mood chart
                    setTimeout(() => {
                        this.initCharts();
                    }, 100);
                },

                getMoodRecommendation() {
                    switch (this.currentMood) {
                        case 'Energetic':
                            return '‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏Å‡∏£‡∏∞‡∏õ‡∏£‡∏µ‡πâ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏£‡πà‡∏≤ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà ‡∏´‡∏£‡∏∑‡∏≠‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå';
                        case 'Calm':
                            return '‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏™‡∏á‡∏ö ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡∏°‡∏≤‡∏ò‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏≤‡∏ô‡∏á‡∏≤‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•';
                        case 'Neutral':
                            return '‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡∏´‡∏£‡∏∑‡∏≠‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤';
                        case 'Tired':
                            return '‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏°‡∏≤‡∏Å‡∏ô‡∏±‡∏Å ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÑ‡∏ü‡∏•‡πå ‡∏ï‡∏≠‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥';
                        default:
                            return '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ';
                    }
                },

                getMoodTasks() {
                    // Return tasks that match current mood
                    switch (this.currentMood) {
                        case 'Energetic':
                            return this.tasks.filter(t => t.priority === 'High' && t.status !== 'done').slice(0, 3);
                        case 'Calm':
                            return this.tasks.filter(t => t.priority === 'Medium' && t.status !== 'done').slice(0, 3);
                        case 'Neutral':
                            return this.tasks.filter(t => t.status === 'doing').slice(0, 3);
                        case 'Tired':
                            return this.tasks.filter(t => t.priority === 'Low' && t.status !== 'done').slice(0, 3);
                        default:
                            return [];
                    }
                },

                startTask(taskId) {
                    const taskIndex = this.tasks.findIndex(t => t.id === taskId);
                    if (taskIndex !== -1) {
                        this.tasks[taskIndex].status = 'doing';
                        this.showNotification('success', '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
                    }
                },

                getPriorityClass(priority) {
                    switch (priority) {
                        case 'High':
                            return 'bg-error/20 text-error';
                        case 'Medium':
                            return 'bg-warning/20 text-warning';
                        case 'Low':
                            return 'bg-success/20 text-success';
                        default:
                            return 'bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300';
                    }
                }
            }
        }
    </script>
</body>
</html>
